(()=>{function e(e,r){if(e&&e.length>0){var t=e;t.next(".portimg").attr("src",window.location.origin+"/img/default.png"),r||t.prev(".fileUpload").val(""),e.remove()}}$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),CKEDITOR.replace("description"),$(".fileUpload").change((function(){var r=$(this);if(this.files&&this.files[0]){var t=new FileReader;t.onload=function(t){e(r.next(".delbtn"),!0),r.next(".portimg").attr("src",t.target.result).show(),r.after('<input type="button" class="delbtn btn btn-default" value="remove">')},t.readAsDataURL(this.files[0])}})),$("form").on("click",".delbtn",(function(r){e($(this))})),$("body").on("click",".reload",(function(){location.reload()})),$("#createProduct").on("submit",(function(e){$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}}),e.preventDefault();var r=$("#product_name").val(),t=$("#product_price").val(),a=CKEDITOR.instances.description.getData(),n=$("#is_sales").val(),o=$("input#product_image")[0].files[0],s=new FormData;s.append("product_name",r),s.append("product_price",t),s.append("description",a),s.append("is_sales",n),s.append("product_image",o),$.ajax({type:"POST",url:"/product-management/create",data:s,processData:!1,contentType:!1,success:function(e){alert("Thêm sản phẩm thành công")},error:function(e){var r=e.responseJSON.errors.product_name,t=e.responseJSON.errors.product_price,a=e.responseJSON.errors.description,n=e.responseJSON.errors.is_sales,o=e.responseJSON.errors.product_image;$.isEmptyObject(r)&&$("#errorName").html(""),$("#errorName").html(r),$.isEmptyObject(t)&&$("#errorPrice").html(""),$("#errorPrice").html(t),$.isEmptyObject(a)&&$("#errorDescription").html(""),$("#errorDescription").html(a),$.isEmptyObject(n)&&$("#errorSales").html(""),$("#errorSales").html(n),$.isEmptyObject(o)&&$("#errorImage").html(""),$("#errorImage").html(o)}})}))})();